class LocationFragment: Fragment() {

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        viewLifecycleOwner.lifecycleScope.launch {
        
            viewLifecycleOwner.repeatOnLifecycle(Lifecycle.State.STARTED) {
            
                locationProvider.locationFlow().collect {
                    // e.g. New location! Update the map
                }
            }
        }
    }
}


@Composable
fun LocationScreen(locationFlow: Flow<Flow>) {

    val lifecycleOwner = LocalLifecycleOwner.current
    val locationFlowLifecycleAware = remember(locationFlow, lifecycleOwner) {
        locationFlow.flowWithLifecycle(lifecycleOwner.lifecycle, Lifecycle.State.STARTED)
    }

    val location by locationFlowLifecycleAware.collectAsState()

    // Current location, do something with it
}
